import{a as t,y as K,j as e,C as V,d as ve,G as Ce,b as w,B as U,S as X,M as S,c as ye,bg as ke,ad as Ee,u as _e,bh as De,bi as Le,F as N,be as Ne,bf as q,b9 as we,bb as Se,bj as $,bk as z,bl as W,bm as R,bn as Q,bo as H,bp as Y,bq as Me,as as Ae,aT as Ie,aQ as Pe,aj as Fe,ak as J}from"./index-DptKfr0g.js";const Te=i=>t.createElement("svg",{width:36,height:36,viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},t.createElement("g",{id:"fi:git-branch"},t.createElement("path",{id:"Vector",d:"M9 31.5C11.4853 31.5 13.5 29.4853 13.5 27C13.5 24.5147 11.4853 22.5 9 22.5C6.51472 22.5 4.5 24.5147 4.5 27C4.5 29.4853 6.51472 31.5 9 31.5Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.createElement("path",{id:"Vector_2",d:"M27 13.5C27 17.0804 25.5777 20.5142 23.0459 23.0459C20.5142 25.5777 17.0804 27 13.5 27",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.createElement("path",{id:"Vector_3",d:"M27 13.5C29.4853 13.5 31.5 11.4853 31.5 9C31.5 6.51472 29.4853 4.5 27 4.5C24.5147 4.5 22.5 6.51472 22.5 9C22.5 11.4853 24.5147 13.5 27 13.5Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.createElement("path",{id:"Vector_4",d:"M9 4.5V22.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),t.createElement("defs",null,t.createElement("linearGradient",{id:"paint0_linear_203_573",x1:4.5,y1:31.5,x2:14.6099,y2:29.718,gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#5B32D0"}),t.createElement("stop",{offset:.978464,stopColor:"#E04EF8"})),t.createElement("linearGradient",{id:"paint1_linear_203_573",x1:13.5,y1:27,x2:28.6648,y2:24.3271,gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#5B32D0"}),t.createElement("stop",{offset:.978464,stopColor:"#E04EF8"})),t.createElement("linearGradient",{id:"paint2_linear_203_573",x1:22.5,y1:13.5,x2:32.6099,y2:11.718,gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#5B32D0"}),t.createElement("stop",{offset:.978464,stopColor:"#E04EF8"})),t.createElement("linearGradient",{id:"paint3_linear_203_573",x1:9,y1:22.5,x2:10.1581,y2:22.4887,gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#5B32D0"}),t.createElement("stop",{offset:.978464,stopColor:"#E04EF8"})))),Oe=i=>t.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:32,viewBox:"0 0 32 32",fill:"none",...i},t.createElement("path",{d:"M9.05706 13.3027V23.5929",stroke:"#8D8DAC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.createElement("path",{d:"M16.0571 8.37891V23.593",stroke:"#8D8DAC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.createElement("path",{d:"M22.9428 18.7402V23.5928",stroke:"#8D8DAC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0286 1H8.97143C4.07143 1 1 4.46813 1 9.37774V22.6223C1 27.5319 4.05714 31 8.97143 31H23.0286C27.9429 31 31 27.5319 31 22.6223V9.37774C31 4.46813 27.9429 1 23.0286 1Z",stroke:"#8D8DAC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function We(){const i=K();return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-caption",children:"Pick up your “Train Model”"}),e.jsxs("div",{className:"grid-container",children:[e.jsxs("div",{className:"grid-item",onClick:()=>{i("classification",{replace:!0})},children:[e.jsx("div",{className:"item-icon-ctn",children:e.jsx(Te,{className:"item-icon"})}),e.jsxs("div",{className:"item-text",children:[e.jsx("div",{className:"item-label",children:"Classification"}),e.jsx("div",{className:"item-description",children:"predict a categorical outcome variable form set of independent variables"})]}),e.jsx("div",{className:"right-icon",children:e.jsx(V,{})})]}),e.jsxs("div",{className:"grid-item",onClick:()=>{i("regression",{replace:!0})},children:[e.jsx("div",{className:"item-icon-ctn",children:e.jsx(Oe,{className:"item-icon"})}),e.jsxs("div",{className:"item-text",children:[e.jsx("div",{className:"item-label",children:"Regression"}),e.jsx("div",{className:"item-description",children:"predicts a continuous outcome variable from a set of independent variables"})]}),e.jsx("div",{className:"right-icon",children:e.jsx(V,{})})]})]})]})}const Re=i=>t.createElement("svg",{style:{transform:"rotate(90deg)"},width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},t.createElement("path",{d:"M6.75 13.5L11.25 9L6.75 4.5",stroke:"black",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Be=i=>t.createElement("svg",{width:60,height:58,viewBox:"0 0 60 58",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},t.createElement("path",{opacity:.5,d:"M29.0671 50.5589L27.1639 52.4515C26.6461 52.9664 26.6461 53.8012 27.1639 54.3161L29.0671 56.2086C29.5849 56.7235 30.4244 56.7235 30.9422 56.2086L32.8454 54.3161C33.3632 53.8012 33.3632 52.9664 32.8454 52.4515L30.9422 50.5589C30.4244 50.044 29.5849 50.044 29.0671 50.5589Z",fill:"currentColor"}),t.createElement("path",{opacity:.75,d:"M31.1585 33.1448L34.1695 36.1389C34.8084 36.7743 34.8084 37.8047 34.1695 38.4385L31.1585 41.4326C30.5195 42.068 29.4833 42.068 28.846 41.4326L25.8366 38.4401C25.1977 37.8047 25.1977 36.776 25.8366 36.1406L28.8476 33.1464C29.4866 32.5111 30.5228 32.5111 31.1618 33.1464L31.1585 33.1448Z",fill:"currentColor"}),t.createElement("path",{opacity:.6,d:"M20.9737 41.9759L18.5333 44.4027C18.0155 44.9176 18.0155 45.7524 18.5333 46.2673L20.9725 48.6929C21.4903 49.2078 22.3299 49.2078 22.8477 48.6929L25.2881 46.2661C25.8059 45.7512 25.8059 44.9164 25.2881 44.4015L22.8488 41.9759C22.331 41.461 21.4915 41.461 20.9737 41.9759Z",fill:"currentColor"}),t.createElement("path",{opacity:.6,d:"M37.1522 41.9873L34.7129 44.4129C34.1951 44.9278 34.1951 45.7626 34.7129 46.2775L37.1534 48.7043C37.6712 49.2192 38.5107 49.2192 39.0285 48.7043L41.4678 46.2787C41.9856 45.7638 41.9856 44.929 41.4678 44.4141L39.0273 41.9873C38.5095 41.4724 37.67 41.4724 37.1522 41.9873Z",fill:"currentColor"}),t.createElement("path",{d:"M24.2289 5.14675L17.121 12.2132C16.6029 12.7284 16.6029 13.5629 17.121 14.0781L20.9679 17.9035C21.4861 18.4187 22.3253 18.4187 22.8434 17.9035L29.0128 11.7688C29.5309 11.2535 30.3701 11.2535 30.8882 11.7688L37.0973 17.943C37.6154 18.4583 38.4547 18.4583 38.9728 17.943L42.8214 14.116C43.3395 13.6008 43.3395 12.7663 42.8214 12.251L30.8899 0.386407C30.3718 -0.128802 29.5325 -0.128802 29.0144 0.386407L24.2289 5.1451V5.14675Z",fill:"currentColor"}),t.createElement("path",{opacity:.85,d:"M20.9705 24.4836L17.1231 28.3094C16.6053 28.8243 16.6053 29.6591 17.1231 30.174L20.9693 33.9987C21.4871 34.5136 22.3266 34.5136 22.8444 33.9987L26.6918 30.1728C27.2096 29.6579 27.2096 28.8231 26.6918 28.3082L22.8456 24.4836C22.3278 23.9687 21.4883 23.9687 20.9705 24.4836Z",fill:"currentColor"}),t.createElement("path",{opacity:.9,d:"M12.8787 16.4357L9.0313 20.2616C8.5135 20.7764 8.51351 21.6113 9.03131 22.1262L12.8775 25.9508C13.3953 26.4657 14.2348 26.4657 14.7526 25.9508L18.6 22.125C19.1178 21.6101 19.1178 20.7753 18.6 20.2604L14.7538 16.4357C14.236 15.9208 13.3965 15.9208 12.8787 16.4357Z",fill:"currentColor"}),t.createElement("path",{opacity:.85,d:"M4.78493 24.4826L0.937557 28.3084C0.419759 28.8233 0.419752 29.6581 0.93755 30.173L4.78376 33.9977C5.30156 34.5126 6.14107 34.5126 6.65886 33.9977L10.5062 30.1719C11.024 29.657 11.024 28.8221 10.5062 28.3073L6.66004 24.4826C6.14224 23.9677 5.30273 23.9677 4.78493 24.4826Z",fill:"currentColor"}),t.createElement("path",{opacity:.85,d:"M37.156 24.4846L33.3087 28.3104C32.7909 28.8253 32.7909 29.6601 33.3087 30.175L37.1549 33.9996C37.6727 34.5145 38.5122 34.5145 39.03 33.9996L42.8773 30.1738C43.3951 29.6589 43.3951 28.8241 42.8773 28.3092L39.0311 24.4846C38.5133 23.9697 37.6738 23.9697 37.156 24.4846Z",fill:"currentColor"}),t.createElement("path",{opacity:.9,d:"M45.2478 16.4357L41.4004 20.2615C40.8826 20.7764 40.8826 21.6113 41.4004 22.1262L45.2467 25.9508C45.7644 26.4657 46.604 26.4657 47.1218 25.9508L50.9691 22.125C51.4869 21.6101 51.4869 20.7753 50.9691 20.2604L47.1229 16.4357C46.6051 15.9208 45.7656 15.9208 45.2478 16.4357Z",fill:"currentColor"}),t.createElement("path",{opacity:.9,d:"M29.0623 16.4357L25.2149 20.2615C24.6971 20.7764 24.6971 21.6113 25.2149 22.1262L29.0611 25.9508C29.5789 26.4657 30.4184 26.4657 30.9362 25.9508L34.7836 22.125C35.3014 21.6101 35.3014 20.7753 34.7836 20.2604L30.9374 16.4357C30.4196 15.9208 29.5801 15.9208 29.0623 16.4357Z",fill:"currentColor"}),t.createElement("path",{opacity:.85,d:"M53.3416 24.4836L49.4942 28.3094C48.9764 28.8243 48.9764 29.6591 49.4942 30.174L53.3404 33.9987C53.8582 34.5136 54.6977 34.5136 55.2155 33.9987L59.0629 30.1728C59.5807 29.6579 59.5807 28.8231 59.0629 28.3082L55.2167 24.4836C54.6989 23.9687 53.8594 23.9687 53.3416 24.4836Z",fill:"currentColor"}),t.createElement("path",{opacity:.75,d:"M45.2485 33.3892L42.2637 36.3572C41.7459 36.8721 41.7459 37.707 42.2637 38.2219L45.2485 41.1899C45.7663 41.7048 46.6058 41.7048 47.1236 41.1899L50.1083 38.2219C50.6261 37.707 50.6261 36.8721 50.1083 36.3572L47.1236 33.3892C46.6058 32.8743 45.7663 32.8743 45.2485 33.3892Z",fill:"currentColor"}),t.createElement("path",{opacity:.75,d:"M12.8754 33.3883L9.89068 36.3563C9.37288 36.8712 9.37288 37.706 9.89068 38.2209L12.8754 41.1889C13.3932 41.7038 14.2327 41.7038 14.7505 41.1889L17.7353 38.2209C18.2531 37.706 18.253 36.8712 17.7352 36.3563L14.7505 33.3883C14.2327 32.8734 13.3932 32.8734 12.8754 33.3883Z",fill:"currentColor"})),Ze=i=>t.createElement("svg",{width:18,height:18,viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...i},t.createElement("path",{d:"M8.25 14.25C11.5637 14.25 14.25 11.5637 14.25 8.25C14.25 4.93629 11.5637 2.25 8.25 2.25C4.93629 2.25 2.25 4.93629 2.25 8.25C2.25 11.5637 4.93629 14.25 8.25 14.25Z",stroke:"#8D8DAC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),t.createElement("path",{d:"M15.75 15.75L12.4875 12.4875",stroke:"#8D8DAC",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),h={"feat-table-row":"_feat-table-row_vln2r_1","feat-name":"_feat-name_vln2r_14","feat-value":"_feat-value_vln2r_22","cm-label":"_cm-label_vln2r_29"},Ge=({experimentId:i})=>{var c;const[r,p]=t.useState({});if(t.useEffect(()=>{ve(i).then(m=>{m.status===200&&p(m.data)}).catch(m=>{console.log(m)})},[]),((c=Object.keys(r))==null?void 0:c.length)>0)return e.jsx("table",{style:{width:"-webkit-fill-available",borderSpacing:"0px"},children:e.jsx("tbody",{children:Object.keys(r).map((m,u)=>e.jsxs("tr",{className:h["feat-table-row"],children:[e.jsx("td",{className:h["feat-name"],children:m}),e.jsx("td",{className:h["feat-value"],children:Math.round(r[m]*100)/100})]},u))})})},Ve=({experimentId:i})=>{const[r,p]=t.useState([]),[c,m]=t.useState(.01),[u,b]=t.useState(!1),[v,E]=t.useState(),[j,M]=t.useState(0),[C,A]=t.useState([]),_=(s,g)=>{m(g)};t.useEffect(()=>{!r.length>0&&Ce(i).then(s=>{s.status===200&&p(s.data)}).catch(s=>{console.log(s)})},[]),t.useEffect(()=>{w("",i).then(s=>{if(s.status===200){const g=s.data[0].train_config.data.target.length,D=s.data[0].train_config.data.target;g>1&&typeof D=="object"&&(console.log("show"),b(!0),A(s.data[0].train_config.data.target),E(s.data[0].train_config.data.target[0]))}}).catch(s=>{console.log(s)})},[]);const I=s=>{E(s.target.value);const g=C.indexOf(s.target.value);M(g),r[g]};return e.jsxs(e.Fragment,{children:[u?e.jsx(e.Fragment,{children:e.jsx(U,{sx:{float:"right",mr:1},children:e.jsx(X,{placeholder:"StageWeight",variant:"outlined",name:"StageWeight",value:v,onChange:I,children:C.map((s,g)=>e.jsx(S,{value:s,children:s},g))})})}):"",e.jsxs(U,{className:h["cm-ctn"],children:[e.jsx(ye,{sx:{"& .MuiSlider-thumb":{color:"white",border:"2px solid #5B32D0",height:"12px",width:"12px"},"& .MuiSlider-track":{backgroundImage:"linear-gradient(80deg, #5B32D0 0%, #E04EF8 96.35%)"},"& .MuiSlider-rail":{color:"#acc4e4"},"& .MuiSlider-active":{color:"green"},"& .MuiSlider-mark":{width:0}},defaultValue:.01,step:.01,valueLabelDisplay:"auto",marks:!0,min:.01,max:1,onChange:_}),u?e.jsx(e.Fragment,{children:r.length>0&&r[j].map(s=>e.jsx(e.Fragment,{children:Math.round(s.threshold*100)/100===c&&e.jsx("div",{className:"cm-layer",children:e.jsx("div",{className:"cm-data",children:e.jsxs("table",{style:{width:"-webkit-fill-available",height:"200px",borderSpacing:"0px",border:"1px solid #D3D3EA",textAlign:"center",td:{border:"1px solid #D3D3EA"}},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{border:"1px solid #D3D3EA"}}),e.jsx("th",{className:h["cm-label"],children:"Actual Positive"}),e.jsx("th",{className:h["cm-label"],children:"Actual Negative"}),e.jsx("th",{className:h["cm-label"],children:"Threshold"}),e.jsx("td",{style:{border:"1px solid #D3D3EA",padding:"15px 30px"},children:Math.round(s.threshold*100)/100})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{className:h["cm-label"],children:"Predicted Positive"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.tp}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.fp}),e.jsx("th",{className:h["cm-label"],children:"Precision"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:Math.round(s.precision*100)/100})]}),e.jsxs("tr",{children:[e.jsx("th",{className:h["cm-label"],children:"Predicted Negative"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.fn}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.tn}),e.jsx("th",{className:h["cm-label"],children:"Recall"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:Math.round(s.recall*100)/100})]})]})]})})})}))}):e.jsx(e.Fragment,{children:r.length>0&&r.map(s=>e.jsx(e.Fragment,{children:Math.round(s.threshold*100)/100===c&&e.jsx("div",{className:"cm-layer",children:e.jsx("div",{className:"cm-data",children:e.jsxs("table",{style:{width:"-webkit-fill-available",height:"200px",borderSpacing:"0px",border:"1px solid #D3D3EA",textAlign:"center",td:{border:"1px solid #D3D3EA"}},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{border:"1px solid #D3D3EA"}}),e.jsx("th",{className:h["cm-label"],children:"Actual Positive"}),e.jsx("th",{className:h["cm-label"],children:"Actual Negative"}),e.jsx("th",{className:h["cm-label"],children:"Threshold"}),e.jsx("td",{style:{border:"1px solid #D3D3EA",padding:"15px 30px"},children:Math.round(s.threshold*100)/100})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("th",{className:h["cm-label"],children:"Predicted Positive"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.tp}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.fp}),e.jsx("th",{className:h["cm-label"],children:"Precision"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:Math.round(s.precision*100)/100})]}),e.jsxs("tr",{children:[e.jsx("th",{className:h["cm-label"],children:"Predicted Negative"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.fn}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:s.tn}),e.jsx("th",{className:h["cm-label"],children:"Recall"}),e.jsx("td",{style:{border:"1px solid #D3D3EA"},children:Math.round(s.recall*100)/100})]})]})]})})})}))})]})]})},Ue="_label_grkd7_1",f={label:Ue,"chart-ctn":"_chart-ctn_grkd7_8","p-f-ctn":"_p-f-ctn_grkd7_15","feat-imp-ctn":"_feat-imp-ctn_grkd7_28","feat-imp-header":"_feat-imp-header_grkd7_36","cfn-ctn":"_cfn-ctn_grkd7_43","cfn-header":"_cfn-header_grkd7_47"},qe=({experimentId:i,experimentStatus:r,message:p})=>{const[c,m]=t.useState(""),[u,b]=t.useState(0);return t.useEffect(()=>{if(console.log(i),i){const v=`${ke}/grafana/d/a91763bb-d009-4be3-b378-2187a01e08bd/model-metrics-optuna?orgId=1&var-experiment=${i}&theme=light&kiosk&width=450&refresh=2s`;m(v)}},[i]),t.useEffect(()=>{b(u+1)},[r,p]),e.jsxs("div",{className:f["dashborad-ctn"],style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",width:"-webkit-fill-available"},children:[e.jsxs("div",{className:f["chart-ctn"],children:[e.jsx("div",{className:f.label,children:"Optuna Params"}),e.jsx("div",{style:{width:"-webkit-fill-available",height:"315px"},children:c!==""?e.jsx("iframe",{src:c,height:"100%",allowFullScreen:!0,style:{border:"none",padding:"16px 24px",width:"calc(100% - 48px)",height:"-webkit-fill-available",body:{background:"#fff"}}},u):null},u)]}),r==="TRAINED"||r==="DEPLOYED"?e.jsxs("div",{style:{width:"-webkit-fill-available",display:"flex"},children:[e.jsxs("div",{className:f["feat-imp-ctn"],style:{flex:"30%",height:"517px"},children:[e.jsx("div",{className:f["feat-imp-header"],children:e.jsx("b",{children:"Feature Importance"})}),e.jsx("div",{className:f["p-f-ctn"],style:{padding:"0px 22px 20px 22px"},children:e.jsx(Ge,{experimentId:i})})]}),e.jsxs("div",{style:{height:"517px",flex:"70%"},className:f["cfn-ctn"],children:[e.jsx("div",{className:f["cfn-header"],children:e.jsx("b",{children:"Confusion Matrix"})}),e.jsx("div",{style:{height:"-webkit-fill-available",padding:"0px 22px 20px 22px"},children:e.jsx(Ve,{experimentId:i})})]})]}):e.jsxs("div",{style:{width:"-webkit-fill-available",minHeight:"40vh",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[e.jsx("div",{children:p}),e.jsx(Ee,{sx:{"& .MuiLinearProgress-root":{background:"#D3D3EA"},"& .MuiLinearProgress-bar":{backgroundImage:"linear-gradient(80deg, #5B32D0 0%, #E04EF8 96.35%)"},width:"440px",height:"4px"}})]})]})},$e="_field_1mkm9_33",ze="_tabs_1mkm9_71",Qe="_tab_1mkm9_71",n={"page-title":"_page-title_1mkm9_1","page-container":"_page-container_1mkm9_11","left-ctn":"_left-ctn_1mkm9_20","field-ctn":"_field-ctn_1mkm9_33","field-label":"_field-label_1mkm9_40","field-sublabel":"_field-sublabel_1mkm9_45",field:$e,tabs:ze,tab:Qe,"tab-selected":"_tab-selected_1mkm9_83","column-list-ctn":"_column-list-ctn_1mkm9_89","column-list-item":"_column-list-item_1mkm9_97","right-ctn":"_right-ctn_1mkm9_118","small-text":"_small-text_1mkm9_131"};function He(){const{modelType:i,experimentId:r}=_e(),p=K(),[c,m]=t.useState({}),[u,b]=t.useState({}),[v,E]=t.useState("lgbm"),[j,M]=t.useState(1),[C,A]=t.useState(""),[_,I]=t.useState([]),[s,g]=t.useState(5),[D,ee]=t.useState(.05),[B,te]=t.useState(!1),[ae,le]=t.useState("None"),[Z,se]=t.useState([]),[ne,y]=t.useState(!1),[P,L]=t.useState(!0),[ie,re]=t.useState(!1),[ce,k]=t.useState(""),[Ye,oe]=t.useState({}),[de,F]=t.useState("AD_DONE"),[he,ue]=t.useState(""),[G,me]=t.useState(),[xe,pe]=t.useState(!1);t.useEffect(()=>{w("",r).then(a=>{var l;if(a.status===200&&((l=a.data[0])!=null&&l.train_config)){oe(a.data[0].train_config.data);const o=a.data[0].status;if(F(a.data[0].status),a.data[0].train_config.data){const d={...u};a.data[0].train_config.data.ignore&&a.data[0].train_config.data.ignore.forEach(O=>{d[O]=!0}),b(d);const x={...c};typeof a.data[0].train_config.data.target=="string"?x[a.data[0].train_config.data.target]=!0:a.data[0].train_config.data.target&&a.data[0].train_config.data.target.forEach(O=>{x[O]=!0}),m(x),le(a.data[0].train_config.data.target),a.data[0].train_config.data.target&&(o==="TRAINED"||o==="DEPLOYED")?(y(!0),k("TRAINED"),p("result",{replace:!0})):y(!1)}}})},[r]);const ge=()=>{Ae(r).then(a=>{a.status===200&&(ue(a.data.url),Ie(a.data.url).then(l=>{l.status===200&&I(Object.keys(JSON.parse(l.data.sample_data)))}))})},fe=a=>{const l={...c};a.target.checked?l[a.target.value]=!0:delete l[a.target.value],m(l),Object.keys(l).length>1&&E("auto")},je=(a,l)=>{const o={...u};a.target.checked?o[a.target.value]=!0:delete o[a.target.value],b(o)};t.useEffect(()=>{ge()},[r]),t.useEffect(()=>{const a=_.filter(l=>l.toLowerCase().includes(C.toLowerCase()));se(a)},[C,_]),t.useEffect(()=>{pe(Object.keys(c).length>0)},[u,c]),t.useEffect(()=>{if(ie){let a=["AD_DONE","TRAINING","TRAINED","DEPLOYED"],l=null;return P?l=setInterval(async()=>{w("",r).then(o=>{var d;o.status===200&&(F(o.data[0].status),a.includes((d=o==null?void 0:o.data[0])==null?void 0:d.status)&&(L(!1),console.log("commit anomalies"),De(r).then(x=>{x.status===200&&(setAnomalyPercentage(x.data),T(!1))}).catch(x=>{console.log(x)})))}).catch(o=>{console.log(o)})},5e3):clearInterval(l),()=>clearInterval(l)}else{let a=null;return P?a=setInterval(async()=>{w("",r).then(l=>{var o,d,x;l.status===200&&(((o=l==null?void 0:l.data[0])==null?void 0:o.status)==="TRAINING"&&(k("Training.."),y(!0)),((d=l==null?void 0:l.data[0])==null?void 0:d.status)==="FAILED"&&(L(!1),y(!1),me("Platform encountered Runtime Error. Please try with new experiment")),((x=l==null?void 0:l.data[0])==null?void 0:x.status)==="TRAINED"&&(k(l.data[0].status),F(l.data[0].status),L(!1),y(!0),p("result",{replace:!0})))}).catch(l=>{console.log(l)})},5e3):clearInterval(a),()=>clearInterval(a)}},[P]);const T=a=>{Le(r,a).then(l=>{l.status===200&&(re(a),L(!0),k(a===!0?"Detecting Anomalies":"Setting up the Experiment"),p("result",{replace:!0}))}).catch(l=>{console.log(l)})},be=()=>{k("Training.."),y(!0);let a=[],l=[];Object.keys(c).forEach(d=>{c[d]&&a.push(d)}),Object.keys(u).forEach(d=>{u[d]&&l.push(d)});let o={data:{input:he,target:a.length===1?a[0]:a,ignore:l,test_split:{ratio:.8},index_column:ae},model:{backend:v,explain:!0,type:i,early_stopping:s,min_frequency:D}};Pe(r,"train",o).then(d=>{d.status===200&&T(!!B)}).catch(d=>{console.log(d)})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:n["page-title"],children:"Predict"}),e.jsxs("div",{className:n["page-container"],children:[e.jsxs("div",{className:n["left-ctn"],children:[e.jsxs("div",{className:n["field-ctn"],children:[e.jsx("span",{className:n["field-label"],children:"Select Model"}),e.jsx("div",{className:n.field,children:e.jsx(N,{fullWidth:!0,size:"small",children:e.jsxs(X,{placeholder:"StageWeight",name:"StageWeight",disabled:Object.keys(c).length>1,onChange:a=>E(a.target.value),value:v,style:{padding:"0px",color:" #1F1F29",fontWeight:400,fontSize:"14px",fontFamily:"Plus Jakarta Sans"},IconComponent:Re,children:[e.jsx(S,{value:"lgbm",children:"LightGBM"}),e.jsx(S,{value:"xgb",children:"XGBoost"}),e.jsx(S,{value:"auto",children:"Auto"})]})})})]}),e.jsxs("div",{className:n["field-ctn"],children:[e.jsx("span",{className:n["field-label"],children:"Predict Fields"}),e.jsx("span",{className:n["field-sublabel"],children:"Select which numerical or categorical fields to predict and optionally ignore"}),e.jsxs("div",{className:n.field,style:{padding:"10px"},children:[e.jsxs(Ne,{value:j,onChange:(a,l)=>{M(l)},"aria-label":"basic tabs example",className:n.tabs,children:[e.jsx(q,{className:j==1?n["tab-selected"]:n.tab,label:"Predict",value:1}),e.jsx(q,{className:j==2?n["tab-selected"]:n.tab,label:"Ignore",value:2})]}),e.jsx(N,{fullWidth:!0,children:e.jsx("div",{style:{border:"1px solid  #D3D3EA",borderRadius:"6px"},children:e.jsx(we,{id:"search",type:"search",fullWidth:!0,value:C,onChange:a=>A(a.target.value),size:"small",placeholder:"Search",style:{color:"#1F1F2",fontSize:"14px"},InputProps:{startAdornment:e.jsx(Se,{position:"start",children:e.jsx(Ze,{})})}})})}),e.jsxs($,{value:j,index:1,style:{width:"-webkit-fill-available"},children:[e.jsx("div",{className:n["column-list-ctn"],children:Z.map((a,l)=>e.jsx(z,{className:n["column-list-item"],children:e.jsx(W,{control:e.jsx(R,{sx:{padding:"2px"},icon:e.jsx(H,{style:{height:"24px",width:"24px"}}),checkedIcon:e.jsx(Q,{style:{height:"24px",width:"24px",color:"#5420E8"}}),value:a,checked:c[a]&&c[a]===!0,onChange:fe}),label:a})},l))}),Object.keys(c).length>1?e.jsx(Y,{severity:"warning",icon:!1,children:"WARNING: Choosing more than 1 label will result in a Multilabel Classification Model. Please ensure the target columns are binary [0, 1]"}):null]}),e.jsx($,{value:j,index:2,style:{width:"-webkit-fill-available"},children:e.jsx("div",{className:n["column-list-ctn"],children:Z.map((a,l)=>e.jsx(z,{className:n["column-list-item"],children:e.jsx(W,{control:e.jsx(R,{sx:{padding:"2px"},icon:e.jsx(H,{style:{height:"24px",width:"24px"}}),checkedIcon:e.jsx(Q,{style:{height:"24px",width:"24px",color:"#5420E8"}}),value:a,checked:u[a]&&u[a]===!0,onChange:je}),label:a})},l))})})]})]}),e.jsxs("div",{className:n["field-ctn"],children:[e.jsx("span",{className:n["field-label"],children:"Early Stopping"}),e.jsx("div",{className:n.field,children:e.jsx(N,{fullWidth:!0,children:e.jsx("input",{style:{border:"0px",padding:"10px",background:"none"},value:s,type:"number",onChange:a=>g(a.target.value)})})})]}),e.jsxs("div",{className:n["field-ctn"],children:[e.jsx("span",{className:n["field-label"],children:"Minimum Frequency"}),e.jsx("div",{className:n.field,children:e.jsx(N,{fullWidth:!0,children:e.jsx("input",{style:{border:"0px",padding:"10px",background:"none"},value:D,type:"float",onChange:a=>ee(a.target.value)})})})]}),e.jsxs("div",{className:n["field-ctn"],children:[e.jsx("span",{className:n["field-label"],children:"Anomaly Detection"}),e.jsx("div",{className:n.field,style:{border:"0px",justifyContent:"flex-start"},children:e.jsx(W,{control:e.jsx(R,{checked:B,onChange:a=>te(a.target.checked)}),label:e.jsx("span",{class:n["field-label"],children:"Check Anomaly Detection"})})})]})]}),e.jsx("div",{className:n["right-ctn"],children:ne?e.jsx(qe,{experimentId:r,experimentStatus:de,message:ce}):e.jsxs("div",{style:{display:"flex",alignSelf:"center",height:"100%",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[e.jsx(Be,{style:{color:"#101016"}}),e.jsx("button",{className:"gradient-background",style:{width:"30vw",marginTop:"44px"},onClick:be,disabled:!xe,children:"Create Predictive Model"}),e.jsx("span",{style:{width:"30vw",marginTop:"22px"},className:n["small-text"],children:"Click to create Predictive Model. It might take some minutes to Detecting Anomalies"}),G&&e.jsx(e.Fragment,{children:e.jsx(Y,{severity:"error",children:e.jsx(Me,{children:G})})})]})})]})]})}function Ke(){return e.jsxs(Fe,{children:[e.jsx(J,{path:"",element:e.jsx(We,{})}),e.jsx(J,{path:":modelType/*",element:e.jsx(He,{})})]})}export{Ke as default};
