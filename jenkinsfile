pipeline {
    agent any

    environment {
        AZURE_CREDENTIALS = credentials('azure-service-principal-credentials') 
        STORAGE_ACCOUNT_NAME = 'yourstorageaccount'
        STORAGE_CONTAINER_NAME = 'yourcontainer'
        BUILD_DIR = 'build'  // update to your build output directory
    }

    stages {
        stage('Build') {
            steps {
                echo 'Building static files...'
                // Example using npm build, adapt if using other tools
                sh 'npm install'
                sh 'npm run build'
            }
        }
        stage('Upload to Azure Storage') {
            steps {
                echo 'Logging into Azure CLI'
                sh """
                    az login --service-principal -u ${AZURE_CREDENTIALS_USR} -p ${AZURE_CREDENTIALS_PSW} --tenant ${AZURE_CREDENTIALS_TENANT}
                    az storage blob upload-batch --account-name ${STORAGE_ACCOUNT_NAME} --destination ${STORAGE_CONTAINER_NAME} --source ${BUILD_DIR} --overwrite
                """
            }
        }
    }
}
